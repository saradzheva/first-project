# project
**Описание проекта**  
Интернет-магазин «В один клик» продаёт разные товары: для детей, для дома, мелкую бытовую технику, косметику и даже продукты. Отчёт магазина за прошлый период показал, что активность покупателей начала снижаться. Привлекать новых клиентов уже не так эффективно: о магазине и так знает большая часть целевой аудитории. Возможный выход — удерживать активность постоянных клиентов. Сделать это можно с помощью персонализированных предложений.
**Цель проекта**  
1. Изучить данные о поведении покупателей на сайте, о выручке и среднемесячной прибыли с каждого покупателя
2. Разработать модель, которая предскажет вероятность снижения покупательской активности
3. Провести анализ произвольного сегмента пользователей и привести решение увеличения его покупательской активности
**Задачи проекта**  
1. Разработать модель, которая предскажет вероятность снижения покупательской активности
2. Выделить сегмент покупателей, проанализировать его и предложить, как увеличить его покупательскую активность. 
**Ход исследования:**
- загрузка данных;
- предобработка данных во всех датафреймах (преобразование формата данных, устранение пропусков, дубликатов);
- исследовательский анализ количественных и категориальныых признаков;
- объединение таблиц;
- корреляционный анализ data_market;
- обучение четырех моделей и выбор наилучшей (подготовка данных с использованием пайплайнов);
- оценка важности признаков для лучшей модели с помощью SHAP;
- сегментация покупателей;
- выводы.
**Исходные данные**  
market_file.csv  
Таблица, которая содержит данные о поведении покупателя на сайте, о коммуникациях с покупателем и его продуктовом поведении.
*id* — номер покупателя в корпоративной базе данных.  
*Покупательская активность* — рассчитанный класс покупательской активности (целевой признак): «снизилась» или «прежний уровень».  
*Тип сервиса* — уровень сервиса, например «премиум» и «стандарт».  
*Разрешить сообщать* — информация о том, можно ли присылать покупателю дополнительные предложения о товаре. Согласие на это даёт покупатель.  
*Маркет_актив_6_мес* — среднемесячное значение маркетинговых коммуникаций компании, которое приходилось на покупателя за последние 6 месяцев. Это значение показывает, какое число рассылок, звонков, показов рекламы и прочего приходилось на клиента.  
*Маркет_актив_тек_мес* — количество маркетинговых коммуникаций в текущем месяце.  
*Длительность* — значение, которое показывает, сколько дней прошло с момента регистрации покупателя на сайте.  
*Акционные_покупки* — среднемесячная доля покупок по акции от общего числа покупок за последние 6 месяцев.  
*Популярная_категория* — самая популярная категория товаров у покупателя за последние 6 месяцев.  
*Средний_просмотр_категорий_за_визит* — показывает, сколько в среднем категорий покупатель просмотрел за визит в течение последнего месяца.  
*Неоплаченные_продукты_штук_квартал* — общее число неоплаченных товаров в корзине за последние 3 месяца.  
*Ошибка_сервиса* — число сбоев, которые коснулись покупателя во время посещения сайта.  
*Страниц_за_визит* — среднее количество страниц, которые просмотрел покупатель за один визит на сайт за последние 3 месяца.  


market_money.csv  
Таблица с данными о выручке, которую получает магазин с покупателя, то есть сколько покупатель всего потратил за период взаимодействия с сайтом.  
*id* — номер покупателя в корпоративной базе данных.  
*Период* — название периода, во время которого зафиксирована выручка. Например, 'текущий_месяц' или 'предыдущий_месяц'.  
*Выручка* — сумма выручки за период.  


market_time.csv  
Таблица с данными о времени (в минутах), которое покупатель провёл на сайте в течение периода.  
*id* — номер покупателя в корпоративной базе данных.  
*Период* — название периода, во время которого зафиксировано общее время.  
*минут* — значение времени, проведённого на сайте, в минутах.  


money.csv  
Таблица с данными о среднемесячной прибыли покупателя за последние 3 месяца: какую прибыль получает магазин от продаж каждому покупателю.  
*id* — номер покупателя в корпоративной базе данных.  
*Прибыль* — значение прибыли.  

**Общий вывод**
**Описание задачи:** разработать решение, которое позволит персонализировать предложения постоянным клиентам, чтобы увеличить их покупательскую активность.  

**Исходные данные и предобработка:**  
были даны 4 датафрейма с данными о поведении покупателя на сайте, о коммуникациях с покупателем и его продуктовом поведении;  
с данными о выручке, которую получает магазин с покупателя, то есть сколько покупатель всего потратил за период взаимодействия с сайтом;  
с данными о времени (в минутах), которое покупатель провёл на сайте в течение периода;  
с данными о среднемесячной прибыли покупателя за последние 3 месяца: какую прибыль получает магазин от продаж каждому покупателю. 

В ходе предобработки были изменены некоторые типы данных, устранены опечатки. Датафреймы объединили и были выделены отдельные столбцы по выручке и времени на сайте для каждого периода: препредыдущий месяц, предыдущий месяц, текущий месяц. Так же были устранены пользователи, с клиентской активностью менее трех месяцев.  

**Исследовательский анализ** показал что количество рассылок, звонков, показов рекламы на клиента за 6 месяцев в размере 4 встречается чаще всего. Это меньше одного раза в месяц. В акционных покупках наблюдается два пика. Вероятно, было две акции. При этом во второй раз покупок было намного меньше. Чаще всего клиенты просматривают по 3 категории за визит. В среднем за 3 месяца у клиента лежат по 1-2 неоплаченных товара в корзине. У клиентов нередко бывает по 4 сбоя на сайте за посещение. Чаще всего клиенты посещают 5-6 страниц за визит. Средняя выручка с каждым месяцем немного увеличивается, а средняя прибыль составляет около 4%. Большинство клиентов пользуются стандартным сервисом.  

**Корреляционный анализ** показал зависимость целевого признака от выручки за препредыдущий месяц и количества просмотренных за визит страниц.

С помощью случайного поиска гиперпараметров была найдена наилучшая модель обучения в виде логистической регрессии.

Проведенный **анализ важности признаков** показал, что признаки 'Средний_просмотр_категорий_за_визит', 'Страниц_за_визит' сильнее всего влияют на покупательскую активность.

На этапе сегментации пользователей выделили три категории с самой высокой вероятностью снижения активности: покупатели домашнего текстиля, косметики и аксессуаров и товаров для детей.

Для повышения покупательской активности можно рекомендовать увеличить ассортимент внутри категорий и повысить просмотр страниц из этих категорий. 